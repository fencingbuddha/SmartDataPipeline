Requirement ID	Requirement Type	Requirement Description	Test Case ID	Test Type	Test File / Path	Status	Last Updated	Evidence / Notes
FR-1	Functional	Upload CSV files and accept JSON payloads for ingestion.	TC-FR-1-API-UPLOAD	System / API	tests/ingestion_upload/test_upload.py::test_upload_csv_success	Pass	2025-12-04	Covered by backend pytest run (84% overall coverage); validates successful CSV upload pathway and response envelope.
FR-2	Functional	Ingest raw CSV/JSON into clean_events with schema validation and idempotency.	TC-FR-2-INGEST-JSON	System / API	tests/ingestion_upload/test_ingest_raw_json.py::test_ingest_json_valid_rows	Pass	2025-12-04	Confirms valid JSON rows are accepted, normalized, and counted correctly.
FR-3	Functional	Compute daily KPIs and persist to metric_daily.	TC-FR-3-KPI-SERVICE	Unit + System	tests/kpi_metrics_engine/test_kpi_service_smoke.py::test_kpi_aggregation_smoke	Pass	2025-12-04	Verifies KPI aggregation logic and DB writes for metric_daily.
FR-4	Functional	Provide rolling-window anomaly detection over daily metrics.	TC-FR-4-ANOMALY-API	System / API	tests/test_anomaly_api.py::test_anomaly_window_default	Pass	2025-12-04	Ensures rolling anomaly route returns expected structure and honors default window.
FR-4	Functional	Provide rolling-window anomaly detection over daily metrics.	TC-FR-4-ANOMALY-UAT	UAT	tests/uat/test_anomaly_overlay_ua.py::test_anomaly_overlay_contract	Pass	2025-12-04	UAT contract for anomaly overlay used by dashboard.
FR-5	Functional	Generate short-horizon forecasts with SARIMAX-backed engine.	TC-FR-5-FORECAST-CONTRACT	UAT	tests/uat/test_forecast_daily_contract_ua.py::test_forecast_daily_contract_schema	Pass	2025-12-04	Validates forecast daily contract (fields, ordering, horizon) for dashboard overlay.
FR-5	Functional	Generate short-horizon forecasts with SARIMAX-backed engine.	TC-FR-5-FORECAST-E2E	System / API	tests/test_forecast_end_to_end_target_date.py::test_forecast_target_dates_align	Pass	2025-12-04	End-to-end test confirming forecast horizon aligns with last metric date.
FR-13	Functional	Diagnose and safely fall back to naive constant forecast when SARIMAX cannot be used.	TC-FR-13-SARIMAX-FALLBACK	Unit	tests/unit/test_forecast_sarimax_fallback.py::test_sarimax_falls_back_when_insufficient_points	Pass	2025-12-04	Evidence that SARIMAX is bypassed and naive model is used when data is insufficient or model fails.
FR-6	Functional	Expose daily metrics via API for dashboard charts and exports.	TC-FR-6-METRICS-API	System / API	tests/kpi_metrics_engine/test_metrics_api.py::test_metrics_api_basic	Pass	2025-12-04	Confirms metrics API returns expected schema and filters.
FR-8	Functional	Export daily metrics as CSV for external analysis.	TC-FR-8-EXPORT-CSV	System / API	tests/ingestion_upload/test_export_csv_api.py::test_metrics_export_csv_contract	Pass	2025-12-04	Ensures CSV export endpoint schema and header layout match contract.
FR-9	Functional	Schedule recurring jobs for KPI, forecast, and housekeeping tasks.	TC-FR-9-SCHEDULER-REGISTRATION	Unit / Integration	tests/scheduler/test_scheduler_registration.py::test_jobs_registered	Pass	2025-12-04	Verifies APScheduler jobs are registered and named correctly at startup.
FR-10	Functional	Provide authentication with signup/login and token refresh for dashboard users.	TC-FR-10-AUTH-API	System / API	tests/test_auth_api.py::test_signup_and_login_flow	Pass	2025-12-04	Confirms signup, login, and token issuance flow works end-to-end.
FR-11	Functional	Log structured request/response metadata for observability and diagnostics.	TC-FR-11-OBS-MW	Unit	tests/unit/test_observability_middleware.py::test_request_logging_envelope	Pass	2025-12-04	Validates observability middleware envelopes request metadata and emits structured logs.
FR-12	Functional	Provide consistent error envelopes for API failures.	TC-FR-12-ERROR-ENVELOPES	System / API	tests/test_envelopes_and_errors.py::test_error_envelope_shapes	Pass	2025-12-04	Checks that errors follow the standardized envelope used by the frontend.
QR-1	Quality	Maintain acceptable performance for ingestion and metrics queries under expected load.	TC-QR-1-COV-BUMP-FORECAST	Unit / Perf-adjacent	tests/unit/test_cov_bump_forecast.py::test_forecast_path_cov_bump	Pass	2025-12-04	Exercises forecast hot path and ensures code remains covered and efficient; additional perf tests tracked separately.
QR-4	Quality	Enforce security headers, TLS, and basic hardening on all HTTP responses.	TC-QR-4-SEC-HEADERS	System / API	tests/test_security_headers.py::test_security_headers_present	Pass	2025-12-04	Confirms security headers (CSP, HSTS, frame options) are applied consistently.
QR-4	Quality	Protect secrets and cryptographic operations for encrypted payload fields.	TC-QR-4-CRYPTO	Unit	tests/unit/test_crypto.py::test_round_trip_encrypt_decrypt	Pass	2025-12-04	Verifies Fernet-based encryption/decryption used for raw event payloads.
QR-5	Quality	Maintain modular, testable code structure with high coverage for core services.	TC-QR-5-SERVICE-COVERAGE	Meta / Coverage	pytest --cov=app --cov-report=term-missing	Pass (84.14% overall)	2025-12-04	Evidence from coverage-report.txt demonstrating ≥80% coverage and good distribution across modules.
QR-6	Quality	Provide a portable demo package using SQLite and setup scripts.	TC-QR-6-PORTABLE-README	Documentation / UAT	docs/README_PORTABLE.md (manual UAT)	Pass	2025-12-04	Manual walkthrough using start_all.sh / start_all.ps1 validated that a fresh user can run the demo end-to-end.
AR-4	Architectural	Maintain up-to-date architecture and testing documentation under docs/.	TC-AR-4-DOCS-REVIEW	Documentation Review	docs/architecture.md, docs/testing/* (manual check)	Pass	2025-12-04	Evidence captured in Week14_Assessment and AR-4: Documentation issue closure notes.
AR-5	Architectural	Track risks such as large-file performance, model drift, and forecast false positives with mitigation plans.	TC-AR-5-RISK-LOG	Process / Tracking	docs/risks-and-mitigations.md (AR-5)	Pass (initial baseline)	2025-12-04	Documented risks and mitigations; some are marked as “Evidence: to be addressed in future work” for transparency.
